# Документация: приложение «Ядро» (core)

Документ описывает базовые модели и общие сущности приложения **core** в проекте PM.Meetup: абстрактная модель с датами, API-ключи и теги.

---

## 1. Назначение приложения

Приложение **core** отвечает за:

- **TimeStampedModel** — абстрактная модель с полями `created_at` и `updated_at`, от которой наследуются модели в других приложениях (events, news, content, частично users).
- **ApiKey** — ключи для доступа к API (если потребуется внешний доступ по ключу).
- **Tag** — общие теги для событий и новостей; один тег может использоваться и в разделе «События», и в разделе «Новости».

Модели **Tag** и **ApiKey** отображаются в админ-панели; **TimeStampedModel** — только база для наследования, в админке отдельно не выводится.

---

## 2. Модели

### 2.1. TimeStampedModel (абстрактная)

Не создаёт таблицу в БД. От неё наследуются другие модели, чтобы автоматически иметь поля:

| Поле | Тип | Описание |
|------|-----|----------|
| created_at | DateTimeField | Дата и время создания записи (auto_now_add=True) |
| updated_at | DateTimeField | Дата и время последнего изменения (auto_now=True) |

В коде: `class Meta: abstract = True`. Используется в events, news, content; в users у модели User свои поля дат.

---

### 2.2. ApiKey (API-ключ)

Ключ для доступа к API (например, для мобильного приложения или внешних сервисов).

| Поле | Тип | Описание |
|------|-----|----------|
| name | CharField(120), уникальный | Название ключа (для понимания, кто/что использует) |
| key | CharField(40), уникальный | Токен; генерируется автоматически при первом сохранении, в админке только для чтения |
| is_active | BooleanField | Активен — можно отключить ключ без удаления |
| created_at | DateTimeField | Дата создания |

Токен (key) показывается в админке частично (первые 8 символов + «...»). Полное значение нужно скопировать при создании ключа; позже в интерфейсе оно не отображается целиком из соображений безопасности.

---

### 2.3. Tag (тег)

Общий тег для фильтрации и отображения. Используется в событиях (Event) и новостях (NewsArticle), а также у спикеров (Speaker) как «темы выступлений».

| Поле | Тип | Описание |
|------|-----|----------|
| name | CharField(100) | Название тега |
| slug | SlugField(120), уникальный | URL-путь (подставляется из названия) |
| created_at, updated_at | DateTimeField | Авто (TimeStampedModel) |

Сортировка по умолчанию: по названию.

---

## 3. Админ-панель

### 3.1. API-ключи

- Список: название, активен, дата создания. Поиск по названию, фильтр по «Активен».
- В карточке: поле **key** только для чтения (и при создании подставится автоматически после сохранения).

### 3.2. Теги

- Список: название, slug, дата создания. Поиск по названию.
- Slug подставляется автоматически из названия (prepopulated_fields).

---

## 4. Связи с другими приложениями

- **events** — у Event и Speaker есть связь «многие ко многим» с Tag.
- **news** — у NewsArticle есть связь «многие ко многим» с Tag.

Удаление тега может быть ограничено, если он привязан к событиям или новостям (в зависимости от настроек БД и Django).

---

## 5. Краткая сводка для заказчика

| Вопрос | Ответ |
|--------|--------|
| Где создавать теги? | Админка → Теги (в разделе «Ядро» или «Core»). Теги общие для событий и новостей. |
| Зачем API-ключи? | Для доступа к API по ключу (например, для внешних приложений). Создаётся ключ с названием, токен генерируется сам; при необходимости ключ можно деактивировать. |
| Что такое TimeStampedModel? | Служебная «заготовка» для других моделей: у каждой такой модели автоматически есть дата создания и дата обновления. В админке отдельно не показывается. |
