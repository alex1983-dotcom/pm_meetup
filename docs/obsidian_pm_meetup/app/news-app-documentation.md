# Документация: приложение «Новости» (news)

Документ описывает модель новостей (статей блога) и раздел админ-панели для управления ими в проекте PM.Meetup.

---

## 1. Назначение приложения

Приложение **news** отвечает за:

- **Новости / статьи** — заголовок, краткое описание для карточки, полный текст (Markdown), обложка, дата публикации, автор, теги.
- **Публикация и черновики** — флаг «Опубликовано»; неопубликованные материалы не показываются на сайте.
- **SEO** — meta title и meta description для страницы новости.
- **Связь с тегами** — общие теги из приложения core (как у событий).

Модель использует **TimeStampedModel** (core): поля `created_at` и `updated_at` заполняются автоматически. Текст статьи хранится в формате **Markdown** (редактор MDEditor в админке).

---

## 2. Модель NewsArticle (новость / статья)

| Поле | Тип | Обязательное | Описание |
|------|-----|--------------|----------|
| title | CharField(300) | Да | Заголовок статьи |
| slug | SlugField(320), уникальный | Да | URL-путь страницы (подставляется из заголовка) |
| short_description | TextField | Нет | Краткое описание для карточки в списке новостей |
| content | MDTextField | Нет | Полный текст статьи (Markdown) |
| cover_image | ImageField | Нет | Обложка (media/news/) |
| publication_date | DateTimeField | Нет | Дата и время публикации (для сортировки и отображения) |
| read_time_minutes | PositiveIntegerField | Нет (0) | Время чтения в минутах |
| views_count | PositiveIntegerField | Нет (0) | Счётчик просмотров |
| author | FK → User (users) | Нет | Автор статьи (может быть пустым) |
| is_published | BooleanField | Нет (False) | Опубликовано — показывать на сайте |
| meta_title | CharField(200) | Нет | SEO: заголовок страницы |
| meta_description | CharField(300) | Нет | SEO: описание |
| tags | M2M → Tag (core) | Нет | Теги для фильтрации и отображения |
| created_at, updated_at | DateTimeField | Авто | Создание и последнее изменение |

Сортировка по умолчанию: сначала по дате публикации (новые выше), затем по дате создания.

---

## 3. Админ-панель

### 3.1. Список новостей

- **Колонки:** заголовок, автор, опубликовано, дата публикации, просмотры, время чтения (мин), дата создания.
- **Флаг «Опубликовано»** можно менять прямо в списке (list_editable).
- **Фильтр** по признаку «Опубликовано».
- **Иерархия** по дате публикации (date_hierarchy).
- **Поиск** по заголовку и краткому описанию.
- **Slug** подставляется автоматически из заголовка (prepopulated_fields).

### 3.2. Карточка новости

- Поле **просмотры** (views_count) только для чтения — обновляется при просмотре на сайте (или отдельной логикой).
- Поля **created_at**, **updated_at** только для чтения.
- **Теги** выбираются в два списка (filter_horizontal).
- Редактор **Содержимое** — Markdown (MDEditor): форматирование, вставка изображений и т.д.

### 3.3. Автор

- Автор — пользователь из приложения **users**. Можно оставить пустым (для статей без указания автора или импорта).

---

## 4. Связи с другими приложениями

- **core** — теги (Tag) для новостей, те же что и для событий.
- **users** — автор статьи (ForeignKey на AUTH_USER_MODEL).

---

## 5. Краткая сводка для заказчика

| Вопрос | Ответ |
|--------|--------|
| Где создавать новости? | Админка → Новости. Заполнить заголовок, краткое описание, содержимое (Markdown), при необходимости — обложку и дату публикации. |
| Как не показывать статью на сайте? | Снять галочку «Опубликовано». |
| Кто такой автор? | Пользователь из раздела «Пользователи»; поле необязательное. |
| Где хранятся обложки? | В каталоге media/news/. |
| Что такое «Время чтения»? | Поле для отображения на сайте («N мин. на чтение»); заполняется вручную или по желанию автоматически. |
| Как задать теги? | В карточке новости — блок «Теги»; теги общие с событиями (управляются в разделе «Теги» в Core). |
